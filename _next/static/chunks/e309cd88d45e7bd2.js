(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59919,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let s=(0,r.createContext)(void 0);function o({children:e}){let[o,l]=(0,r.useState)("system"),[i,a]=(0,r.useState)({darkBg:"#1d1d1d",brandHue:142,brandSat:70,titleHue:210,titleSat:15,sidebarOpacity:50,lightHue:210,lightSat:40,darkHue:240,darkSat:4,surfaceHue:210,surfaceSat:40});(0,r.useEffect)(()=>{let e=localStorage.getItem("localsnips-theme");e&&l(e);let t=localStorage.getItem("localsnips-custom-theme");if(t)try{a(JSON.parse(t))}catch(e){}},[]),(0,r.useEffect)(()=>{localStorage.setItem("localsnips-custom-theme",JSON.stringify(i))},[i]);let n=()=>{let e=window.document.documentElement,t=window.matchMedia("(prefers-color-scheme: dark)").matches;if([50,100,200,300,400,500,600,700,800,900,950].forEach(t=>{e.style.removeProperty(`--surface-${t}`),e.style.removeProperty(`--brand-${t}`)}),e.style.removeProperty("--background"),e.style.removeProperty("--foreground"),e.style.removeProperty("--brand-h"),e.style.removeProperty("--brand-s"),e.style.removeProperty("--surface-h"),e.style.removeProperty("--surface-s"),e.style.removeProperty("--title-color"),e.style.removeProperty("--title-muted"),e.style.removeProperty("--sidebar-opacity"),e.classList.remove("light","dark"),"custom"===o){let t,r;e.classList.add("dark"),console.log("[ThemeProvider] Custom mode active - injecting full palette");let s=(3==(t=(i.darkBg||"#1d1d1d").substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),[(r=parseInt(t.join(""),16))>>16&255,r>>8&255,255&r]),o=[255,255,255],l=e=>{let t,r,l=(t=1-e,[Math.round(s[0]*t+o[0]*e),Math.round(s[1]*t+o[1]*e),Math.round(s[2]*t+o[2]*e)]);return r=l[0],"#"+[r,l[1],l[2]].map(e=>{let t=e.toString(16);return 1===t.length?"0"+t:t}).join("")},a={950:i.darkBg||"#1d1d1d",900:l(.06),800:l(.12),700:l(.2),600:l(.3),500:l(.42),400:l(.55),300:l(.68),200:l(.8),100:l(.9),50:l(.96)};Object.entries(a).forEach(([t,r])=>{e.style.setProperty(`--surface-${t}`,r)}),e.style.setProperty("--background",a[950]),e.style.setProperty("--foreground",a[50]);let n=i.brandHue,d=i.brandSat;e.style.setProperty("--brand-h",n.toString()),e.style.setProperty("--brand-s",`${d}%`),Object.entries({50:`hsl(${n}, ${d}%, 97%)`,100:`hsl(${n}, ${d}%, 94%)`,200:`hsl(${n}, ${d}%, 86%)`,300:`hsl(${n}, ${d}%, 77%)`,400:`hsl(${n}, ${d}%, 66%)`,500:`hsl(${n}, ${d}%, 55%)`,600:`hsl(${n}, ${d}%, 47%)`,700:`hsl(${n}, ${d}%, 40%)`,800:`hsl(${n}, ${d}%, 33%)`,900:`hsl(${n}, ${d}%, 25%)`,950:`hsl(${n}, ${d}%, 15%)`}).forEach(([t,r])=>{e.style.setProperty(`--brand-${t}`,r)}),e.style.setProperty("--ai-suggest-bg",a[800]),e.style.setProperty("--ai-suggest-text",a[200]),e.style.setProperty("--ai-suggest-hover",a[700]),e.style.setProperty("--tooltip-bg",a[900]),e.style.setProperty("--tooltip-text",a[200]),e.style.setProperty("--tooltip-border",a[800]);let c=i.titleHue,u=i.titleSat;e.style.setProperty("--title-color",`hsl(${c}, ${u}%, 65%)`),e.style.setProperty("--title-muted",`hsl(${c}, ${Math.max(u-5,0)}%, 50%)`),e.style.setProperty("--sidebar-opacity",`${i.sidebarOpacity/100}`),console.log("[ThemeProvider] Custom palette applied:",{bg:a[950],accent:`hsl(${n}, ${d}%, 55%)`,titles:`hsl(${c}, ${u}%, 65%)`})}else{let r="light"===o?"light":"dark"===o||t?"dark":"light";e.classList.add(r),"light"===r?(e.style.setProperty("--brand-h","161"),e.style.setProperty("--brand-s","91%")):(e.style.setProperty("--brand-h","211"),e.style.setProperty("--brand-s","100%")),"light"===r?void 0!==i.lightHue&&(e.style.setProperty("--surface-h",i.lightHue.toString()),e.style.setProperty("--surface-s",`${i.lightSat}%`)):void 0!==i.darkHue&&(e.style.setProperty("--surface-h",i.darkHue.toString()),e.style.setProperty("--surface-s",`${i.darkSat}%`))}};return(0,r.useEffect)(()=>{n(),localStorage.setItem("localsnips-theme",o),localStorage.setItem("localsnips-custom-theme",JSON.stringify(i))},[o,i]),(0,r.useEffect)(()=>{let e=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>{n()};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[o,i]),(0,r.useEffect)(()=>{let e=()=>{"visible"===document.visibilityState&&n()},t=()=>{n()};return document.addEventListener("visibilitychange",e),window.addEventListener("popstate",t),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("popstate",t)}},[o,i]),(0,r.useEffect)(()=>{window.webkit?.messageHandlers?.windowControl&&window.webkit.messageHandlers.windowControl.postMessage({action:"setTheme",mode:o,customHex:"custom"===o?i.darkBg:void 0,titleHue:"custom"===o?i.titleHue:void 0})},[o,i.darkBg,i.titleHue]),(0,t.jsx)(s.Provider,{value:{theme:o,setTheme:l,customTheme:i,setCustomTheme:a},children:e})}function l(){let e=(0,r.useContext)(s);if(!e)throw Error("useTheme must be used within a ThemeProvider");return e}e.s(["ThemeProvider",()=>o,"useTheme",()=>l])},27639,e=>{"use strict";e.s(["ASSET_PREFIX",0,"/localsnips-preview"])},53642,e=>{"use strict";var t=e.i(43476),r=e.i(59919),s=e.i(27639);function o({children:e}){return(0,t.jsxs)("html",{lang:"en",children:[(0,t.jsxs)("head",{children:[(0,t.jsx)("title",{children:"LocalSnips - Preview"}),(0,t.jsx)("meta",{name:"description",content:"AI-powered local knowledge base"}),(0,t.jsx)("link",{rel:"icon",type:"image/png",href:`${s.ASSET_PREFIX}/logo.png`})]}),(0,t.jsx)("body",{className:"antialiased",children:(0,t.jsx)(r.ThemeProvider,{children:e})})]})}e.s(["default",()=>o])}]);